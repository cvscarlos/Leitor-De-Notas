<!-- Errors messages -->
<div *ngIf="noteErrors.length">
    <div class="mt-3 p-3 bg-warning bg-gradient-warning small-font" >
        <h3>Log</h3>
        <ul class="list-group">
            <li class="list-group-item list-group-item-warning" *ngFor="let note of noteErrors">
                Página: <strong>{{note._page}}</strong> | Arquivo: <strong>{{note.fileName}}</strong> | Nota: <strong>{{note.number}}</strong>
                <ul>
                    <li *ngFor="let msg of note._messages">{{msg}}</li>
                </ul>
            </li>
        </ul>
    </div>
</div>

<!-- Detalhes da nota -->
<div *ngFor="let note of noteDetails;" class="row mt-5">
    <div class="col small-font" *ngIf="note.showNote">
        <div class="card" [class.bg-danger]="!note.proofIsValid">
            <h4 class="card-header">Nota: nº{{ note.number }} de {{ note.date }} | Corretora: {{ note.broker }}</h4>

            <div class="card-body">
                <div class="row">
                    <div class="col-xs col-md-4">
                        <h4>Resumo Financeiro</h4>
                        <table class="table table-sm">
                            <tbody>
                                <tr> <td>CPF/CNPJ:</td>        <td>{{ note.cpf }}</td> </tr>
                                <tr> <td>Nome do arquivo:</td> <td>{{ note.fileName }}</td> </tr>
                                <tr> <td>Corretagem:</td>      <td>{{ this.numberFormatService.br(note.clearing) }}</td></tr>
                                <tr> <td>Taxas:</td>           <td>{{ this.numberFormatService.br(note.allFees + note.ISSTax) }}</td></tr>
                                <tr> <td>I.R.R.F.:</td>        <td>{{ this.numberFormatService.br(note.IRRF) }}</td></tr>
                                <tr> <td>Prova real:</td>      <td>{{ note.proofIsValid ? 'Válida' : 'Inválida' }}</td> </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="col-xs col-md-8">
                        <h4>Negócios realizados </h4>
                        <table class="table table-sm table-striped table-bordered">
                            <thead>
                                <tr>
                                    <th class="align-middle">C/V</th>
                                    <th class="align-middle">Tipo mercado</th>
                                    <th class="align-middle">Prazo</th>
                                    <th class="align-middle">Especificação do título</th>
                                    <th class="align-middle">Obs. (*)</th>
                                    <th class="align-middle">Quantidade</th>
                                    <th class="align-middle">Preço / Ajuste</th>
                                    <th class="align-middle">Valor Operação / Ajuste</th>
                                    <th class="align-middle">D/C</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let trade of note.trades;">
                                    <td>{{ trade.BS }}</td>
                                    <td>{{ trade.marketType }}</td>
                                    <td>{{ trade.time }}</td>
                                    <td>{{ trade.securities }} <span *ngIf="trade.originalSecurities">({{ trade.originalSecurities }})</span></td>
                                    <td>{{ trade.obs }}</td>
                                    <td>{{ this.numberFormatService.br0(trade.quantity) }}</td>
                                    <td>{{ this.numberFormatService.br(trade.price) }}</td>
                                    <td>{{ this.numberFormatService.br(trade.itemTotal) }}</td>
                                    <td>{{ trade.DC }}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
