<div class="container-fluid px-3 px-md-4 py-4" style="max-width: 800px">
  <div class="row justify-content-center">
    <div class="col-12 col-md-10 col-lg-8">
      <h2 class="text-center mb-4 fw-semibold text-dark">Painel Administrativo</h2>

      <div class="card shadow-sm mb-4">
        <div class="card-header bg-light border-bottom">
          <h5 class="mb-0 fw-semibold text-secondary">Entrar como usuário</h5>
        </div>
        <div class="card-body p-4">
          <form [formGroup]="userSwitchForm" (ngSubmit)="onUserSwitch()">
            <div class="mb-3">
              <label for="emailOrCpf" class="form-label fw-medium text-secondary"
                >Email ou CPF/CNPJ:</label
              >
              <input
                type="text"
                id="emailOrCpf"
                class="form-control form-control-lg"
                formControlName="emailOrCpf"
                placeholder="Digite o email ou CPF do usuário"
                [class.is-invalid]="
                  userSwitchForm.get('emailOrCpf')?.invalid &&
                  userSwitchForm.get('emailOrCpf')?.touched
                "
              />
              @if (
                userSwitchForm.get('emailOrCpf')?.invalid &&
                userSwitchForm.get('emailOrCpf')?.touched
              ) {
                <div class="invalid-feedback d-block">
                  @if (userSwitchForm.get('emailOrCpf')?.errors?.['required']) {
                    <small> Email ou CPF é obrigatório </small>
                  }
                  @if (userSwitchForm.get('emailOrCpf')?.errors?.['minlength']) {
                    <small> Deve ter pelo menos 3 caracteres </small>
                  }
                </div>
              }
            </div>

            <button
              type="submit"
              class="btn btn-primary btn-lg w-100 d-flex align-items-center justify-content-center"
              [disabled]="userSwitchForm.invalid || isUserSwitchLoading"
            >
              @if (isUserSwitchLoading) {
                <span
                  class="spinner-border spinner-border-sm me-2"
                  role="status"
                  aria-hidden="true"
                ></span>
              }
              {{ isUserSwitchLoading ? 'Processando...' : 'Entrar como usuário' }}
            </button>
          </form>
        </div>
      </div>

      <div class="card shadow-sm">
        <div class="card-header bg-light border-bottom">
          <h5 class="mb-0 fw-semibold text-secondary">Desvincular pagamento</h5>
        </div>
        <div class="card-body p-4">
          <form [formGroup]="unlinkPaymentForm" (ngSubmit)="onUnlinkPayment()">
            <div class="mb-3">
              <p>Libere um pagamento para que possa ser vinculado novamente a qualquer usuário.</p>
              <label for="paymentId" class="form-label fw-medium text-secondary"
                >ID do Pagamento:</label
              >
              <input
                type="text"
                id="paymentId"
                class="form-control form-control-lg"
                formControlName="paymentId"
                placeholder="Digite o ID do pagamento"
                [class.is-invalid]="
                  unlinkPaymentForm.get('paymentId')?.invalid &&
                  unlinkPaymentForm.get('paymentId')?.touched
                "
              />
              @if (
                unlinkPaymentForm.get('paymentId')?.invalid &&
                unlinkPaymentForm.get('paymentId')?.touched
              ) {
                <div class="invalid-feedback d-block">
                  @if (unlinkPaymentForm.get('paymentId')?.errors?.['required']) {
                    <small> ID do pagamento é obrigatório </small>
                  }
                </div>
              }
            </div>

            <button
              type="submit"
              class="btn btn-danger btn-lg w-100 d-flex align-items-center justify-content-center"
              [disabled]="unlinkPaymentForm.invalid || isUnlinkPaymentLoading"
            >
              @if (isUnlinkPaymentLoading) {
                <span
                  class="spinner-border spinner-border-sm me-2"
                  role="status"
                  aria-hidden="true"
                ></span>
              }
              {{ isUnlinkPaymentLoading ? 'Processando...' : 'Desvincular pagamento' }}
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
